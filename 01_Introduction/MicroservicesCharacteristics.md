## マイクロサービスの特徴

James LewisとMartin Fowlerは、[ほとんどのマイクロサービスアーキテクチャに当てはまる共通の特性](https://www.martinfowler.com/articles/microservices.html)を提唱しました。

* サービスによるコンポーネント化
* ビジネスケイパビリティに基づいた組織化
* プロジェクトではなくプロダクト
* スマートエンドポイントとダムパイプ
* 分散ガバナンス
* 分散データ管理
* インフラストラクチャの自動化
* 障害設計
* 進化的設計

前述の特性は確かにすべて注目すべきです。
しかし、数年かけてマイクロサービスアーキテクチャの研究、コーディング、および議論をしてきて、最も一般的な問題は次の事項であることを認めざるを得ません。

    モノリシックなレガシーデータベースをどのように進化させるのか。

この質問によって、エンタープライズアプリケーション開発者がモノリスをより効果的に破壊する方法についていくつかの考え方が生まれました。
そのため、この本では分散データ管理について主に議論します。
一言でその考え方を表現するならば、次のように述べることができるでしょう。

    マイクロサービスごとに独立したデータベースを保有するべきである。

この発言には、課題が潜んでいます。
新規開発プロジェクトの場合でも、別のサービスによって提供される情報が必要なシナリオは数多くあります。
経験上、リモートプロシージャコール(RPC)またはREST等のリモート呼出しに依存すると、データ集約型のユースケースではスループットとレイテンシの両方で十分な性能が得られません。

この本で述べる内容はすべてリレーショナルデータベースに対処するための戦略です。
第2章ではデプロイメントに関連するアーキテクチャについて説明します。
第3章で紹介するゼロダウンタイム移行は、マイクロサービスに限った話ではありませんが、分散システムではさらに重要です。
ネットワークを介して相互接続された異なる成果物によって分断された情報を持つ分散システムを扱っているため、情報をどのように収束させるかについても対処する必要があります。
第4章では整合性モデルの違いについて説明します。作成、読み取り、更新、および削除(CRUD)と、CQRS(Command and Query Responsibility Segregation)です。
第5章で扱う最後のトピックでは、マイクロサービスアーキテクチャのノード間でどのように情報を統合できるかについて説明します。

#### NoSQLデータベースはどうなの？

マイクロサービスやリレーショナルなものとは異なるデータベース型について議論するのは当然のことです。
各マイクロサービスに独立したデータベースを保有しなければならない場合に、別のテクノロジーの選択を妨げられることがあるでしょうか。
おそらく、キーバリューストアやドキュメントストア、フラットファイルやgitリポジトリ等を使って処理する方がよいデータもあると思います。

NoSQLデータベースを様々なコンテキストで使用する成功事例は色々ありますが、これらの一部は現在のエンタープライズコンテキストにも適合します。
しかし、たとえそうであっても、マイクロサービス化に向けて安全に始めることをお勧めします。つまり、リレーショナルデータベースを使用することです。
まずは、既存のリレーショナルデータベースを使ってうまく動作するようにしてください。
最初のマイクロサービス実装・統合が問題なく完了したら、別のデータベース技術の方がより良いかどうか判断することが可能です。

マイクロサービスへの道は険しいですが、どんな変更においても1つずつ問題を苦労して乗り越えることで、よりチャンスが得られます。
マイクロサービス等の新しいものと異なるデータベース技術による未知の問題を同時に対処する必要はありません。