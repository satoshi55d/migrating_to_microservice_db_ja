## なぜマイクロサービスなのか

マイクロサービスに関する議論はスケーラビリティに関するものだと考える人がいますが、おそらく間違っています。
確かにNetflixやAmazonなどの企業によって実装されたマイクロサービスアーキテクチャに関する素晴らしい文献を常に目にしています。
それでは、このような質問をしてみましょう。世界中で一体どのくらいの企業がNetflixやAmazonのようになることができるでしょうか。
続いて、もう1つ質問です。世界中で一体どのくらいの企業がNetflixやAmazonと同じスケーラビリティ要件に対処する必要があるでしょうか。

答えは、世界中の大多数の開発者がエンタープライズアプリケーションソフトウェアを扱っているということです。
NetflixやAmazonのドメインモデルを過小評価したくはありませんが、エンタープライズドメインモデルは完全に対処すべき野獣であると言えます。

ですから、大多数の開発者にとってマイクロサービスは通常スケーラビリティに関するものではありません。
結局のところ、リードタイムを改善し、リリースのバッチサイズを縮小することがすべてなのです。

しかし、DevOpsも同じ目標を共有しています。なぜ、この目標を達成するためにマイクロサービスについても議論するのでしょうか。
おそらく開発チームやコードベースが非常に大規模なので、アプリケーションの異なる部分を何ヶ所も変更しないまま修正を行うのは難しいでしょう。
巨大で密結合かつ複雑に絡み合ったコードベースの中にいる人たちの間で仕事を調整することも困難です。

マイクロサービスによって、この巨大なモノリシックコードベースをより小さく、明確に定義された、凝集性のある、疎結合の成果物に分割しようと試みています。
そして、分割された部品をマイクロサービスと呼んでいます。
自然と一緒になって変化し、残りの部分から分離されたコードベースの一部を特定することができれば、それらを他とは別にリリースできる成果物に分離することができます。
他の部品が「リリース可能状態」になるのを待つ必要がないため、リードタイムとバッチサイズは改善されます。
このようにして、マイクロサービスを本番環境にデプロイすることができるのです。

#### マイクロサービスにはこれくらいの代価が必要です

マイクロサービスアーキテクチャは複数の成果物を包含し、各々が本番環境にデプロイされなければなりません。
単一のモノリスを本番環境にデプロイする際の問題が残っている場合に、複数の成果物に分けることによってそれらの問題が少なくなると思いますか。
非常に成熟したソフトウェアデプロイメントパイプラインは、あらゆるマイクロサービスアーキテクチャにとって絶対的要件です。
パイプラインの成熟度を評価するために使用できる指標には、手作業による介入が必要な量、自動化されたテストの量、環境の自動プロビジョニング、および監視があります。

分散されたシステムというものは難しいものです。人々もそうです。
マイクロサービスを扱う際には、分散されたシステムがテーブルにもたらす新たな問題のすべてに向き合う必要があることを認識しなければなりません。
トレース、モニタリング、ログ集約、フォールトトレランス等は、モノリスで作業するときには対処する必要のない問題です。

マイクロサービスアーキテクチャには大きな代価が付随しますが、モノリシックアプリケーションの問題のせいでそれ以上のコストがかかっていれば、支払う価値があります。
モノリスとマイクロサービスは異なるアーキテクチャであり、アーキテクチャはすべてトレードオフです。