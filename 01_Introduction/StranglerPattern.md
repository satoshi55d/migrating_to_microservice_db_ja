## ストラングラーパターン

マーティン・ファウラーは、[モノリス・ファースト・アプローチ](https://martinfowler.com/bliki/MonolithFirst.html)についての素晴らしい記事を書いています。
彼の記事から2つの興味深いポイントを引用してみましょう。

* 成功したマイクロサービスのほとんどすべてが大きく成長したモノリスを解体させることから始まっています。
* 最初からマイクロサービスとして構築されたシステム事例のほとんどすべてが、重大なトラブルを引き起こして終わった。

すべてのエンタープライズアプリケーションソフトウェア開発者にとって、
すべて投げ捨てることなくゼロから始めることはきっとラッキーなことだと思います。（誰かがこのアプローチを考えていたとしても）
そして、重大なトラブルを引き起こす結末を迎えることでしょう。
しかし、本当にラッキーなのは本番環境で保守しているモノリスを既に保有していることなのです。

モノリスファーストの考え方は、絞め殺しの木の発達に似ていることから、絞め殺しパターンとも言われます。
絞め殺しの木は、宿主の木の一番上で小さく芽生えます。
そして、その根は地面に向かって成長し始めます。
根が地面に達するとさらに成長を続け、絞め殺しの木は宿主の木の周りにまで成長し始めます。
やがて絞め殺しの木は宿主の木よりも大きくなり、時には宿主を死滅させることさえあります。
完全にこじつけだと思いますが、私たちは皆、モノリスという獣を殺したいという深い欲望を心の中に隠しています。

ドメインモデルは統合されたり分離されたりするもので、その境界を識別するのはソフトウェアの世界で最も難しいことの1つです。
そのため、しっかりとしたモノリスを作るのは良い出発点です。
間違った境界を設けてしまうと、次々と発生する変更やバグに惑わされることになるでしょう。
境界の識別は、通常は時間の経過とともに成熟するものです。
時間をかけて得た境界知識に対応するためにシステムをリファクタリングし、再構築するのです。
そして、最近のIDEツールでは自動的にリファクタリングや移動を行うことができるため、対処するコードベースが1つであればより簡単に行うことができます。
のちに確立された境界をマイクロサービスに適用することができます。
だからこそ、絞め殺しパターンによって利益を得られます。マイクロサービスで小さく始めて、モノリスの周りで大きくしていくのです。
日々進化するエンタープライズアプリケーションソフトウェアにとって、最も賢明で安全なアプローチだと思います。

新しいアーキテクチャにおいて、よくマイクロサービスの第一候補とされるのは、システムの新機能またはコア機能の周辺機能変更です。
時間が経つに連れて、マイクロサービスアーキテクチャは絞め殺しの木のように成長しますが、
ほとんどの企業の現実は、依然として1つか2つ、あるいは多分最大で6つまでのマイクロサービスがモノリスと共存している状態だと考えます。

どのソフトウェア部品がマイクロサービスに適しているかを選択する難題を乗り越えるには、次のセクションで説明するドメイン駆動設計の知識が少しだけ必要です。